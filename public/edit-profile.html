<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset='utf-8'>
    <title>Profile Creation</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='scripts.js' defer></script>
</head>
<button class="back-button" onclick="goBack()">Go Back</button>
<body>
    <header>
        <h1>Profile Creation<img src="android-chrome-192x192.png" class="header-image"/></h1>
    </header>
    <nav>
        <a href="welcome.html">Welcome</a> 
        <a href="profile.html">Profile Creation</a>
        <a href="Dashboard.html">Dashboard</a>
        <a href="workout.html">Workout</a> 
    </nav>
</head>
<body>
    <header>
        <h1>Edit Your Profile</h1>
    </header>
    <main>
        <form id="edit-profile-form" action="/update-profile" method="POST">
            <section>
            <fieldset>
                <legend>Personal Information</legend>
                <label for="first-name">First Name:</label>
                <input type="text" id="first-name" name="first-name" required>
                
                <label for="last-name">Last Name:</label>
                <input type="text" id="last-name" name="last-name" required>

                <label for="age">Age:</label>
                <input type="number" id="age" name="age" min="0" required>

                <label for="weight">Weight (kg):</label>
                <input type="number" id="weight" name="weight" min="0" required>

                <label for="height">Height (cm):</label>
                <input type="number" id="height" name="height" min="0" required>
                
                <label for="gender">Gender:</label>
                <select id="gender" name="gender">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>

                <label for="goal">Fitness Goal:</label>
                <input type="text" id="goal" name="goal" placeholder="e.g., Weight Loss, Muscle Gain">
            </fieldset>
            <fieldset>
                <legend>Workout Preferences</legend>
                <label>
                    <input type="checkbox" name="preferences" value="cardio"> Cardio
                </label>
                <label>
                    <input type="checkbox" name="preferences" value="powerlifting"> Powerlifting
                </label>
                <label>
                    <input type="checkbox" name="preferences" value="flexibility"> Flexibility
                </label>
                <label>
                    <input type="checkbox" name="preferences" value="weightlifting"> Weightlifting
                </label>
            </fieldset>

            <fieldset>
                <legend>Days per Week</legend>
                <label>
                    <input type="checkbox" name="workout-days" value="monday"> Monday
                </label>
                <label>
                    <input type="checkbox" name="workout-days" value="tuesday"> Tuesday
                </label>
                <label>
                    <input type="checkbox" name="workout-days" value="wednesday"> Wednesday
                </label>
                <label>
                    <input type="checkbox" name="workout-days" value="thursday"> Thursday
                </label>
                <label>
                    <input type="checkbox" name="workout-days" value="friday"> Friday
                </label>
                <label>
                    <input type="checkbox" name="workout-days" value="saturday"> Saturday
                </label>
                <label>
                    <input type="checkbox" name="workout-days" value="sunday"> Sunday
                </label>
            </fieldset>
            </section>

            <button type="submit">Save Changes</button>
            <button type="button" onclick="window.location.href='dashboard.html'">Cancel</button>
        </form>
    </main>
    <script>
        function loadProfileData() {
            fetch('/api/user-data')
                .then(response => response.json())
                .then(data => {
                    if (data) {
                        document.getElementById('first-name').value = data['first-name'];
                        document.getElementById('last-name').value = data['last-name'];
                        document.getElementById('age').value = data.age;
                        document.getElementById('weight').value = data.weight;
                        document.getElementById('height').value = data.height;
                        document.getElementById('gender').value = data.gender;
                        document.getElementById('goal').value = data.goal;
                    }
                })
                .catch(err => console.error('Error loading data:', err));
        }

        window.onload = loadProfileData;
    </script>
</body>
</html>